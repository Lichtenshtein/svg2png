name: Build svg2png (Windows x64)

on:
#  push:
#    branches: [ main, master ]
#  pull_request:
#    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4
      with:
        submodules: recursive

    - name: Setup MSBuild
      uses: microsoft/setup-msbuild@v1.0.2

    - name: Restore NuGet Packages (if any)
      run: nuget restore svg2png.sln
      continue-on-error: true

    - name: Build Solution (Release|x64)
      run: msbuild svg2png.sln /p:Configuration=Release /p:Platform=x64 /t:Rebuild /verbosity:minimal

    - name: Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: svg2png-build-output
        path: src/Release/
